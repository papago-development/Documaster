@using Documaster.Model.Entities
@model IEnumerable<Documaster.Model.Entities.CustomizeTab>

    @{
        ViewBag.Title = "Index";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
    <div class="displayContent">
        <h2>Customizare Taburi </h2>
        <p>
            @Html.ActionLink("Adauga tab nou", "Create", "CustomizeTab", new { @class = "btn btn-primary" })
        </p>
        <br />
        <ul id="sortable">
            @foreach(var item in Model)
            {
            <li class="ui-state-default" data-customizeTabId="@(item.Id)">
                <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>@Html.DisplayFor(x => item.Name)
                <a href="@Url.Action("Edit", new{ id = item.Id })">
                    <i class="glyphicon glyphicon-pencil" title="Modifica" id="icon"></i></a> 
                <a href="@Url.Action("Delete", new { id = item.Id })">
                    <i class="glyphicon glyphicon-trash" title="Sterge" id="icon"></i>
                </a>
            </li>
            }
        </ul>
    </div>
    <script type="text/javascript">
    $(document).ready(function () {
        $("#sortable").sortable({
            stop: function(event, ui){
                saveOrder();
            }

        });
    });
      var saveOrder = function() {
          var items = $("#sortable").children();
          var sortedList = [];
          var entityName = 'CustomizeTab';

          $.each(items, function(index, value) {
              var id = $(value).attr('data-customizeTabId');
              sortedList.push(id);
          });
          console.log(sortedList);
          $.post("SaveOrder", {sortedList, entityName});
      }

    </script>